<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GitHub Chat</title>
    <style>
        body { font-family: sans-serif; max-width: 400px; margin: 20px auto; }
        #box { height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div id="box"></div>
    <input type="text" id="n" placeholder="Имя" style="width: 50px;">
    <input type="text" id="m" placeholder="Текст" style="width: 200px;">
    <button id="b">ОК</button>

   <!-- Используем cdnjs (Cloudflare) вместо gstatic -->
<script src="https://cdnjs.cloudflare.com"></script>
<script src="https://cdnjs.cloudflare.com"></script>

<script>
    var config = {
        apiKey: "AIzaSyBQ8AVQ1D8c0IpDgoRXL0QayaaVktd3_Xg",
        databaseURL: "https://gitchat-2b675-default-rtdb.firebaseio.com",
        projectId: "gitchat-2b675"
    };

    // Инициализация
    if (typeof firebase !== 'undefined') {
        firebase.initializeApp(config);
        var db = firebase.database().ref("messages");

        // Слушаем сообщения
        db.on("child_added", function(snap) {
            var data = snap.val();
            var div = document.createElement("div");
            div.style.borderBottom = "1px solid #eee";
            div.innerHTML = "<b>" + (data.name || "Аноним") + ":</b> " + data.text;
            document.getElementById("box").appendChild(div);
            document.getElementById("box").scrollTop = 9999;
        });

        // Кнопка отправить
        document.getElementById("b").onclick = function() {
            var m = document.getElementById("m");
            var n = document.getElementById("n");
            if (m.value) {
                db.push({ name: n.value || "Аноним", text: m.value });
                m.value = "";
            }
        };
    } else {
        document.body.innerHTML = "<h1>Ошибка: Библиотеки не загружены. Проверьте сеть.</h1>";
    }
</script>

</body>
</html>
