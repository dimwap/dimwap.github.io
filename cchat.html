<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GitHub Chat</title>
    <style>
        body { font-family: sans-serif; max-width: 400px; margin: 20px auto; }
        #box { height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div id="box"></div>
    <input type="text" id="n" placeholder="Имя" style="width: 50px;">
    <input type="text" id="m" placeholder="Текст" style="width: 200px;">
    <button id="b">ОК</button>

    <!-- ИСПОЛЬЗУЕМ КЛАССИЧЕСКИЕ СКРИПТЫ БЕЗ МОДУЛЕЙ -->
    <script src="https://www.gstatic.com"></script>
    <script src="https://www.gstatic.com"></script>

    <script>
        // Конфиг без лишних полей
        var config = {
            apiKey: "AIzaSyBQ8AVQ1D8c0IpDgoRXL0QayaaVktd3_Xg",
            databaseURL: "https://gitchat-2b675-default-rtdb.firebaseio.com",
            projectId: "gitchat-2b675"
        };

        // Инициализация v8 (старая, но самая надежная для простых страниц)
        firebase.initializeApp(config);
        var db = firebase.database().ref("messages");

        // Чтение
        db.on("child_added", function(snap) {
            var data = snap.val();
            var div = document.createElement("div");
            div.innerHTML = "<b>" + (data.name || "Аноним") + ":</b> " + data.text;
            document.getElementById("box").appendChild(div);
            document.getElementById("box").scrollTop = 9999;
        });

        // Отправка
        document.getElementById("b").onclick = function() {
            var text = document.getElementById("m").value;
            if (text) {
                db.push({
                    name: document.getElementById("n").value,
                    text: text
                });
                document.getElementById("m").value = "";
            }
        };
    </script>
</body>
</html>
