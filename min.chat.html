<!DOCTYPE html>
<html>
<body>
    <div id="out">Ожидание данных...</div>

    <script type="module">
        // Используем CDN esm.sh — он не вызывает ошибок 404/CORS на GitHub
        import { initializeApp } from "https://esm.sh";
        import { getDatabase, ref, onValue } from "https://esm.sh";

        const config = {
            databaseURL: "https://gitchat-2b675-default-rtdb.firebaseio.com"
        };

        try {
            const app = initializeApp(config);
            const db = getDatabase(app);
            const testRef = ref(db, 'test');

            // Читаем значение один раз
            onValue(testRef, (snapshot) => {
                const data = snapshot.val();
                document.getElementById("out").innerHTML = "Данные из базы: " + data;
                console.log("Успех! Получено:", data);
            }, (error) => {
                document.getElementById("out").innerHTML = "Ошибка базы: " + error.message;
            });
        } catch (e) {
            document.getElementById("out").innerHTML = "Ошибка скрипта: " + e.message;
        }
    </script>
</body>
</html>
